<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from /home/xyd/single_arm_ros2/src/single_arm_description/config/single_arm_demo.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="single_arm">
  <!-- 在机械臂末端添加夹爪 -->
  <link name="world"/>
  <!-- 光学平台链接，使用你的 table.stl -->
  <link name="optical_table">
    <visual>
      <!-- 根据你的STL坐标系调整origin（例如：如果STL原点在底部中心，把平台表面抬到z=0） -->
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <!-- 示例：假设table厚度0.3m，把表面抬到z=0，可自行调整 -->
      <geometry>
        <mesh filename="package://single_arm_description/meshes/visual/table.STL" scale="0.001 0.001 0.001"/>
        <!-- 如果是mm单位，scale=0.001 -->
      </geometry>
      <material name="table_gray">
        <color rgba="0.3 0.3 0.3 1.0"/>
        <!-- 深灰色，典型光学平台颜色 -->
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <!-- 与visual保持一致 -->
      <geometry>
        <mesh filename="package://single_arm_description/meshes/collision/table_simplified.STL" scale="0.001 0.001 0.001"/>
        <!-- 建议用简化版STL -->
      </geometry>
    </collision>
    <!-- 可选：添加惯性（粗略估计，质量和惯性根据实际平台调整） -->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="50.0"/>
      <!-- 示例：50kg -->
      <inertia ixx="10.0" ixy="0.0" ixz="0.0" iyy="10.0" iyz="0.0" izz="15.0"/>
    </inertial>
  </link>
  <link name="obstacle_box">
    <visual>
      <!-- 底面放在平台表面（z=0），高度0.6m，中心抬高0.3m -->
      <origin rpy="0 0 1.5707963" xyz="-0.78 0.11 0.6"/>
      <geometry>
        <box size="0.05 0.5 1.2"/>
        <!-- x=0.4m, y=0.6m, z=0.6m，可自行调整 -->
      </geometry>
      <material name="obstacle_red">
        <color rgba="0.8 0.2 0.2 1.0"/>
        <!-- 红色，便于在RViz中识别 -->
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 1.5707963" xyz="-0.78 0.11 0.6"/>
      <geometry>
        <box size="0.05 0.5 1.2"/>
      </geometry>
    </collision>
    <!-- 可选惯性 -->
    <inertial>
      <origin rpy="0 0 1.5707963" xyz="-0.78 0.11 0.6"/>
      <mass value="10.0"/>
      <inertia ixx="1.0" ixy="0" ixz="0" iyy="1.0" iyz="0" izz="1.0"/>
    </inertial>
  </link>
  <!-- 障碍物固定到world（与平台同层级） -->
  <joint name="obstacle_box_joint" type="fixed">
    <parent link="world"/>
    <child link="obstacle_box"/>
    <!-- 位置：放在平台右边（x正方向偏移1.2m），y=0，底面z=0 -->
    <!-- 你可以根据实际平台尺寸调整偏移量 -->
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <!-- 把光学平台固定到world（或parent） -->
  <joint name="optical_table_joint" type="fixed">
    <parent link="world"/>
    <child link="optical_table"/>
    <origin rpy="0 0 0" xyz="0 0 0.8"/>
    <!-- 允许调用时指定整体偏移，例如放在房间某个位置 -->
  </joint>
  <link name="base_link0">
    <inertial>
      <origin rpy="0 0 0" xyz="0.000175438965895703 0.000532268611608213 0.0522669336069407"/>
      <mass value="0.294119348658744"/>
      <inertia ixx="0.00032400532756564" ixy="-5.40018128899478E-07" ixz="2.80958833443407E-06" iyy="0.000288426609563467" iyz="4.70285799717824E-06" izz="0.00022606419233657"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/visual/base_link0.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/collision/base_link0_simplified.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="base_link0_joint" type="fixed">
    <parent link="optical_table"/>
    <child link="base_link0"/>
    <origin rpy="0 0 0" xyz="-0.39 0.31 0.0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="Empty_Link1">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.0698160338667713 0.0143691484806762 0.0110780451265005"/>
      <mass value="0.0556965417664696"/>
      <inertia ixx="2.70633960140179E-05" ixy="6.26519650974738E-06" ixz="-7.57900465240318E-06" iyy="0.000122679596314603" iyz="-1.35387556070585E-08" izz="0.000131443137410343"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/visual/Empty_Link1.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/collision/Empty_Link1_simplified.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint1" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.0962"/>
    <parent link="base_link0"/>
    <child link="Empty_Link1"/>
    <axis xyz="0 0 1"/>
    <limit effort="0" lower="-3.14" upper="3.14" velocity="0"/>
  </joint>
  <link name="Empty_Link2">
    <inertial>
      <origin rpy="0 0 0" xyz="0.181439379971025 -0.000243727779993763 0.0563566127647854"/>
      <mass value="0.136910629397679"/>
      <inertia ixx="6.36253645667139E-05" ixy="-2.59780400404477E-07" ixz="3.91165512368072E-05" iyy="0.00232680960984668" iyz="2.19730518054456E-07" izz="0.00235460000620241"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/visual/Empty_Link2.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/collision/Empty_Link2_simplified.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint2" type="revolute">
    <origin rpy="1.5708 -1.5708 0" xyz="-0.0965 0 0"/>
    <parent link="Empty_Link1"/>
    <child link="Empty_Link2"/>
    <axis xyz="0 0 -1"/>
    <limit effort="0" lower="-1.57" upper="1.57" velocity="0"/>
  </joint>
  <link name="Empty_Link3">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0769703538179346 0.0011973381819983 -0.036630608037162"/>
      <mass value="0.071034581827702"/>
      <inertia ixx="2.84299236389363E-05" ixy="-7.63642211997418E-08" ixz="-3.24526804421142E-06" iyy="0.00034423782372923" iyz="7.76643137920171E-08" izz="0.000355286583426244"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/visual/Empty_Link3.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/collision/Empty_Link3_simplified.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint3" type="revolute">
    <origin rpy="0 0 0" xyz="0.3465 0 0"/>
    <parent link="Empty_Link2"/>
    <child link="Empty_Link3"/>
    <axis xyz="0 0 -1"/>
    <limit effort="0" lower="-2.44" upper="2.44" velocity="0"/>
  </joint>
  <link name="Empty_Link4">
    <inertial>
      <origin rpy="0 0 0" xyz="0.000159906636227225 -0.0237750547972229 0.0101176007477914"/>
      <mass value="0.022184932643385"/>
      <inertia ixx="2.56758689481119E-05" ixy="2.79874296577121E-08" ixz="5.63284180274909E-09" iyy="1.10340049734087E-05" iyz="-4.22353915692278E-06" izz="1.97133811530173E-05"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/visual/Empty_Link4.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/collision/Empty_Link4.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint4" type="revolute">
    <origin rpy="0 0 3.1416" xyz="0.15 0 0"/>
    <parent link="Empty_Link3"/>
    <child link="Empty_Link4"/>
    <axis xyz="0 0 -1"/>
    <limit effort="0" lower="-0.69" upper="2.61" velocity="0"/>
  </joint>
  <link name="Empty_Link5">
    <inertial>
      <origin rpy="0 0 0" xyz="4.0073722048969E-05 0.0692610166439792 0.00106706924657128"/>
      <mass value="0.0873760863924216"/>
      <inertia ixx="0.000178750470884079" ixy="-5.70038950626815E-08" ixz="2.3383845024287E-08" iyy="8.0271837143644E-05" iyz="2.62896263229073E-06" izz="0.000152690614441042"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/visual/Empty_Link5.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/collision/Empty_Link5_simplified.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint5" type="revolute">
    <origin rpy="1.5708 1.5708 3.1416" xyz="0 -0.0965 0"/>
    <!-- rpy="1.5708 1.5708 0" /> -->
    <parent link="Empty_Link4"/>
    <child link="Empty_Link5"/>
    <axis xyz="0 0 -1"/>
    <limit effort="0" lower="-3.14" upper="3.14" velocity="0"/>
  </joint>
  <link name="Empty_Link6">
    <inertial>
      <origin rpy="0 0 0" xyz="1.77592382908782E-07 1.02533046673927E-07 0.00864548755955175"/>
      <mass value="0.0269583221049951"/>
      <inertia ixx="8.03963570266054E-06" ixy="7.7682030591729E-11" ixz="-6.48485539118529E-12" iyy="8.039546003178E-06" iyz="-3.74403298061715E-12" izz="1.53036652434403E-05"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/visual/Empty_Link6.STL"/>
      </geometry>
      <material name="">
        <color rgba="1 1 1 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://single_arm_description/meshes/collision/Empty_Link6_simplified.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint6" type="revolute">
    <origin rpy="-1.5708 0 0" xyz="0 0.185 0"/>
    <parent link="Empty_Link5"/>
    <child link="Empty_Link6"/>
    <axis xyz="0 0 1"/>
    <limit effort="0" lower="-3.14" upper="3.14" velocity="0"/>
  </joint>
  <!-- <xacro:gripper name="gripper" parent="Empty_Link6">
    <origin xyz="0 0 0.019" rpy="0 0 0"/>  
  </xacro:gripper> -->
  <ros2_control name="single_arm" type="system">
    <hardware>
      <plugin>single_arm_hardware_interface/SingleArmHardwareInterface</plugin>
      <param name="namespace"></param>
    </hardware>
    <joint name="joint1">
      <command_interface name="position"/>
      <command_interface name="effort"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <param name="can_id">0x01</param>
      <param name="position_offset">0</param>
      <param name="motor_type">whj</param>
      <!-- 新增：固定用 WHJ -->
      <param name="can_interface">can1</param>
      <!-- 新增：固定用 can1 -->
    </joint>
    <joint name="joint2">
      <command_interface name="position"/>
      <command_interface name="effort"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <param name="can_id">0x02</param>
      <param name="position_offset">0</param>
      <param name="motor_type">whj</param>
      <!-- 新增：固定用 WHJ -->
      <param name="can_interface">can1</param>
      <!-- 新增：固定用 can1 -->
    </joint>
    <joint name="joint3">
      <command_interface name="position"/>
      <command_interface name="effort"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <param name="can_id">0x03</param>
      <param name="position_offset">0</param>
      <param name="motor_type">whj</param>
      <!-- 新增：固定用 WHJ -->
      <param name="can_interface">can1</param>
      <!-- 新增：固定用 can1 -->
    </joint>
    <joint name="joint4">
      <command_interface name="position"/>
      <command_interface name="effort"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <param name="can_id">0x04</param>
      <param name="position_offset">0</param>
      <param name="motor_type">rmd</param>
      <!-- 新增：固定用 rmd -->
      <param name="can_interface">can0</param>
      <!-- 新增：固定用 can0 -->
    </joint>
    <joint name="joint5">
      <command_interface name="position"/>
      <command_interface name="effort"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <param name="can_id">0x05</param>
      <param name="position_offset">0</param>
      <param name="motor_type">rmd</param>
      <!-- 新增：固定用 rmd -->
      <param name="can_interface">can0</param>
      <!-- 新增：固定用 can0 -->
    </joint>
    <joint name="joint6">
      <command_interface name="position"/>
      <command_interface name="effort"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <param name="can_id">0x06</param>
      <param name="position_offset">0</param>
      <param name="motor_type">rmd</param>
      <!-- 新增：固定用 rmd -->
      <param name="can_interface">can0</param>
      <!-- 新增：固定用 can0 -->
    </joint>
  </ros2_control>
</robot>
